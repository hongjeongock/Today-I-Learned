# 클래스와 Static

## Static
객체(인스턴스)에 속하지 않고 클래스 자체에 소속되는 키워드.

프로그램 실행 중 최초 접근 시 메모리(데이터 영역)에 로드되고, 종료 시까지 유지됨.

객체 생성 없이 `클래스명.멤버`로 직접 접근 가능.

### 왜 필요한가?

- 어디서든 접근 가능한 전역적 데이터가 필요할 때.

- 인스턴스를 여러 번 만들 필요 없이 공통적으로 사용되는 기능을 제공할 때.

### Static 특징

- 인스턴스 없이 접근

    new 없이 바로 사용
    
- 프로그램 종료까지 메모리에 유지
  
    편리하지만 메모리 낭비 가능

- 여러 객체가 하나의 값을 공유
  
    인스턴스 100개가 있어도 static 변수는 하나.

- 정적 생성자는 딱 한 번만 실행

    Static 멤버 첫 접근 시 자동 실행.

## Static의 종류와 사용 규칙
### Static 변수 (정적필드)

전역적으로 단 하나만 존재.

모든 인스턴스가 동일한 값 공유.

### sStatic 메서드 (정적 함수)

인스턴스 없이 호출 가능.

this 사용 불가, 인스턴스 필드 접근 불가.

### static 클래스

인스턴스 생성 불가

내부 멤버는 모두 static이어야함.

공용 기능 묶는 용도로 사용

### static 생성자
개발자가 호출 불가

static 멤버에 처음 접근할 때 자동 1회 실행

## static 사용시 주의점
1. 남발금지
    - 프로그램 종료까지 메모리를 계속 차지함
    - 모든 곳에서 접근 가능해 관리 난이도 상승
    - 의존성이 높아져 유지보수가 어려워짐
    - 테스트하기 어려운 코드가 됨
2. static이 적합한 경우
    - 반드시 하나만 존재해야하는 데이터(예: 총 점수, 게임 배속, 공용 설정 값)
    - 여러 객체가 공윻래야 할 공통 기능 (예 : 수학 계산, 확률 함수, 포맷팅 기능)
  
3. static이 부적절한 경우
    - 캐릭터, 몬스터, 아이템처럼 게임내 개별적 존재
    - 상태가 자주 변하고 삭제 및 생성이 반복되는 객체

## 메모리 구조 관점에서 static
### 일반 메모리 할당
- 값 타입 : 스택에 저장, 범위 종료 시 자동 해제
- 참조 타입 : 힙에 저장, GC(Gatbage Collector)가 정리
### static 메모리 할당
- 데이터 영역에 저장됨
- 프로그램 종료 전까지 사라지지 않음
- GC 대상이 아님

## 상속
### 상속의 목적

- 공통 코드를 부모 클래스에 모아두기
- 중복 제거, 유지보수 최소화
- 기능 확장 용이
예 : Car -> Bus, Truck
     Monster -> Goblin, Slime, Balrog

### 상속의 기본 개념

자식 클래스는 부모의 필드와 매서드를 그대로 사용 가능.

접근 제한자에 따라 접근 가능 여부 달라짐

- 접근 제한자 차이
<table style="border-collapse:collapse;border-spacing:0" class="tg"><thead><tr><th style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;font-weight:bold;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">제한자</th><th style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;font-weight:bold;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">외부</th><th style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;font-weight:bold;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">내부</th><th style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;font-weight:bold;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">상속 관계</th></tr></thead>
<tbody><tr><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:left;vertical-align:middle;word-break:normal">public</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">O</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">O</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">O</td></tr>
<tr><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:left;vertical-align:middle;word-break:normal">private</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">X</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">O</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">X</td></tr>
<tr><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:left;vertical-align:middle;word-break:normal">protected</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">X</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">O</td><td style="border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;text-align:center;vertical-align:middle;word-break:normal">O</td></tr></tbody></table>

### 상속이 주는 이점
1. 코드 재사용성 증가
    
    부모 클래스에 공통 기능을 선언 -> 자식이 모두 자동 상속

2. 유지보수 편리

    공통 기능 변경 시 부모만 수정하면 모든 자식 클래스에 반영

3. 다향성 구현 가능

    부모 타입 하나로 여러 자식 타입 관리 가능

    🔽예시
    ```csharp
    Monster[] monsters = { new Goblin(), new Slime(), new Balrog() };
    ```

### 생성자와 상속
1. 생성자 호출 순서

    자식 생성자 -> 부모 생성자 호출 -> 부모 로직 먼저 실행

2. base 키워드로 부모 생성자 호출
```csharp
public bus() : base(100, "버스")
{

}
```
3. private 필드 접근 방식
- 자식 클래스는 부모의 private 필드 접근 불가.
- 반드시 부모 생성자를 통해 데이터 초기화

## static vs 상속 — 어떤 상황에서 무엇을 쓰나?
<table><thead>
  <tr>
    <th>상황</th>
    <th>선택</th>
  </tr></thead>
<tbody>
  <tr>
    <td>전역 데이터 관리</td>
    <td>static</td>
  </tr>
  <tr>
    <td>반드시 하나만 존재해야 하는 객체</td>
    <td>static 또는 싱글톤</td>
  </tr>
  <tr>
    <td>개별적이고 독립적인 객체 여러 개 필요</td>
    <td>인스턴스 (static X)</td>
  </tr>
  <tr>
    <td>공통 기능 묶기</td>
    <td>static 클래스</td>
  </tr>
  <tr>
    <td>중복 코드 제거</td>
    <td>상속</td>
  </tr>
  <tr>
    <td>여러 객체를 상위 타입으로 묶어 관리</td>
    <td>상속 + 다형성</td>
  </tr>
</tbody>
</table>